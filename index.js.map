{"version":3,"file":"index.js","sources":["../src/js/pixaby-api..js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchData(url) {\n  const response = await axios(url);\n\n  return response;\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(\n      item =>\n        ` <li class=\"gallery-item\">\n      <a href=\"${item.largeImageURL}\"><img class=\"img\" src=\"${item.webformatURL}\" alt=\"${item.tags}\"/></a>\n      <div class=\"card-wrapper\"><p class=\"like text\">Likes<span class=\"content\">${item.likes}</span></p>\n      <p class=\"view text\">Views<span class=\"content\">${item.views}</span></p>\n      <p class=\"comment text\">Comments<span class=\"content\">${item.comments}</span></p>\n      <p class=\"download text\">Downloads<span class=\"content\">${item.downloads}</span></p></div>\n      \n    </li>`\n    )\n    .join('');\n}\n","import axios from 'axios';\nimport { fetchData } from './js/pixaby-api.';\nimport { createMarkup } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst btn = document.querySelector('.btn');\nconst pageGallery = document.querySelector('.gallery');\nconst input = document.querySelector('.text-input');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more');\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '?key=47394436-b99c7e5d1cf7e77b7cf55ecb6';\nconst PER_PAGE = 15;\n\nlet userSearch = '';\nlet page = 1;\n\nform.addEventListener('submit', handleSubmit);\npageGallery.addEventListener('click', handleClick);\nloadMore.addEventListener('click', pageUpload);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  const userRequest = event.target.elements.text.value.trim();\n  userSearch = userRequest;\n  page = 1;\n\n  if (userRequest === '') {\n    return iziToast.warning({\n      title: '',\n      position: 'topRight',\n      message: 'You forgot to fill the field!',\n    });\n  }\n  form.reset();\n  pageGallery.innerHTML = '';\n  loader.style.display = 'block';\n  loadMore.style.display = 'none';\n\n  try {\n    const response =\n      await fetchData(`https://pixabay.com/api/?key=47394436-b99c7e5d1cf7e77b7cf55ecb6&q=${userRequest}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${PER_PAGE}\n`);\n    if (response.data.total === 0) {\n      return iziToast.error({\n        title: '',\n        position: 'topRight',\n        message:\n          '\"Sorry, there are no images matching your search query. Please try again!\"',\n      });\n    }\n    gallery.refresh();\n    pageGallery.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(response.data.hits)\n    );\n\n    if (response.data.total > 15) {\n      loadMore.style.display = 'block';\n    }\n  } catch (error) {\n    iziToast.error({\n      title: '',\n      position: 'topRight',\n      message: 'Oooops! Somthing went wrong :/',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nasync function pageUpload() {\n  page++;\n  loader.style.display = 'block';\n  loadMore.disabled = true;\n\n  const galleryItem = document.querySelector('.gallery-item');\n  const { height } = galleryItem.getBoundingClientRect();\n\n  try {\n    const response = await fetchData(\n      `https://pixabay.com/api/?key=47394436-b99c7e5d1cf7e77b7cf55ecb6&q=${userSearch}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${PER_PAGE}`\n    );\n\n    pageGallery.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(response.data.hits)\n    );\n    gallery.refresh();\n    window.scrollBy({\n      top: height * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n    if (page >= response.data.totalHits / PER_PAGE) {\n      loadMore.style.display = 'none';\n      iziToast.warning({\n        title: '',\n        position: 'bottomCenter',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: '',\n      position: 'topRight',\n      message: 'Oooops! Somthing went wrong :/',\n    });\n  } finally {\n    loader.style.display = 'none';\n    loadMore.disabled = false;\n  }\n}\n\nlet gallery = new SimpleLightbox('.gallery-item a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction handleClick(event) {\n  event.preventDefault();\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n  gallery.on('show.simplelightbox');\n}\n"],"names":["fetchData","url","axios","createMarkup","arr","item","form","pageGallery","loader","loadMore","PER_PAGE","userSearch","page","handleSubmit","handleClick","pageUpload","event","userRequest","iziToast","response","gallery","galleryItem","height","SimpleLightbox"],"mappings":"owBAEO,eAAeA,EAAUC,EAAK,CAGnC,OAFiB,MAAMC,EAAMD,CAAG,CAGlC,CCNO,SAASE,EAAaC,EAAK,CAChC,OAAOA,EACJ,IACCC,GACE;AAAA,iBACSA,EAAK,aAAa,2BAA2BA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA,kFAChBA,EAAK,KAAK;AAAA,wDACpCA,EAAK,KAAK;AAAA,8DACJA,EAAK,QAAQ;AAAA,gEACXA,EAAK,SAAS;AAAA;AAAA,UAGzE,EACA,KAAK,EAAE,CACZ,CCNA,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC/B,SAAS,cAAc,MAAM,EACzC,MAAMC,EAAc,SAAS,cAAc,UAAU,EACvC,SAAS,cAAc,aAAa,EAClD,MAAMC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,cAAc,YAAY,EAI9CC,EAAW,GAEjB,IAAIC,EAAa,GACbC,EAAO,EAEXN,EAAK,iBAAiB,SAAUO,CAAY,EAC5CN,EAAY,iBAAiB,QAASO,CAAW,EACjDL,EAAS,iBAAiB,QAASM,CAAU,EAE7C,eAAeF,EAAaG,EAAO,CACjCA,EAAM,eAAc,EACpB,MAAMC,EAAcD,EAAM,OAAO,SAAS,KAAK,MAAM,OAIrD,GAHAL,EAAaM,EACbL,EAAO,EAEHK,IAAgB,GAClB,OAAOC,EAAS,QAAQ,CACtB,MAAO,GACP,SAAU,WACV,QAAS,+BACf,CAAK,EAEHZ,EAAK,MAAK,EACVC,EAAY,UAAY,GACxBC,EAAO,MAAM,QAAU,QACvBC,EAAS,MAAM,QAAU,OAEzB,GAAI,CACF,MAAMU,EACJ,MAAMnB,EAAU,qEAAqEiB,CAAW,iEAAiEL,CAAI,aAAaF,CAAQ;AAAA,CAC/L,EACG,GAAIS,EAAS,KAAK,QAAU,EAC1B,OAAOD,EAAS,MAAM,CACpB,MAAO,GACP,SAAU,WACV,QACE,4EACV,CAAO,EAEHE,EAAQ,QAAO,EACfb,EAAY,mBACV,YACAJ,EAAagB,EAAS,KAAK,IAAI,CACrC,EAEQA,EAAS,KAAK,MAAQ,KACxBV,EAAS,MAAM,QAAU,QAE5B,MAAe,CACdS,EAAS,MAAM,CACb,MAAO,GACP,SAAU,WACV,QAAS,gCACf,CAAK,CACL,QAAY,CACRV,EAAO,MAAM,QAAU,MACxB,CACH,CAEA,eAAeO,GAAa,CAC1BH,IACAJ,EAAO,MAAM,QAAU,QACvBC,EAAS,SAAW,GAEpB,MAAMY,EAAc,SAAS,cAAc,eAAe,EACpD,CAAE,OAAAC,CAAM,EAAKD,EAAY,sBAAqB,EAEpD,GAAI,CACF,MAAMF,EAAW,MAAMnB,EACrB,qEAAqEW,CAAU,iEAAiEC,CAAI,aAAaF,CAAQ,EAC/K,EAEIH,EAAY,mBACV,YACAJ,EAAagB,EAAS,KAAK,IAAI,CACrC,EACIC,EAAQ,QAAO,EACf,OAAO,SAAS,CACd,IAAKE,EAAS,EACd,KAAM,EACN,SAAU,QAChB,CAAK,EACGV,GAAQO,EAAS,KAAK,UAAYT,IACpCD,EAAS,MAAM,QAAU,OACzBS,EAAS,QAAQ,CACf,MAAO,GACP,SAAU,eACV,QAAS,4DACjB,CAAO,EAEJ,MAAe,CACdA,EAAS,MAAM,CACb,MAAO,GACP,SAAU,WACV,QAAS,gCACf,CAAK,CACL,QAAY,CACRV,EAAO,MAAM,QAAU,OACvBC,EAAS,SAAW,EACrB,CACH,CAEA,IAAIW,EAAU,IAAIG,EAAe,kBAAmB,CAClD,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAAST,EAAYE,EAAO,CAC1BA,EAAM,eAAc,EAChBA,EAAM,OAAO,WAAa,OAG9BI,EAAQ,GAAG,qBAAqB,CAClC"}